import{b as k,Q as D}from"./QInput.d0e78761.js";import{c as P,h as q}from"./render.df6f1f62.js";import{r as $,f as L,j as R,a as j,h as z,g as T,s as N,m as w,p as J,ab as U,_ as O,A as c,J as f,I as y,L as _,K as b,a1 as Q,F as H,G as V,B as M,C as G,H as W,D as E}from"./index.082bf996.js";import{Q as X}from"./QPage.7df5ef3c.js";import"./QIcon.39090671.js";import"./use-size.ecf5d36c.js";import"./QSpinner.0e5f1ab9.js";import"./use-dark.2bb17e8f.js";import"./QBtn.7e3ca75e.js";import"./use-router-link.8c7d9008.js";import"./format.70c50b2b.js";var Y=P({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(e,{slots:i,emit:l}){const u=T(),a=$(null);let r=0;const o=[];function d(t){const s=[],g=typeof t=="boolean"?t:e.noErrorFocus!==!0,S=++r,x=(m,n)=>{l("validation-"+(m===!0?"success":"error"),n)};for(let m=0;m<o.length;m++){const n=o[m],h=n.validate();if(typeof h.then=="function")s.push(h.then(p=>({valid:p,comp:n}),p=>({valid:!1,comp:n,err:p})));else if(h!==!0){if(e.greedy===!1)return x(!1,n),g===!0&&typeof n.focus=="function"&&n.focus(),Promise.resolve(!1);s.push({valid:!1,comp:n})}}return s.length===0?(x(!0),Promise.resolve(!0)):Promise.all(s).then(m=>{const n=m.filter(I=>I.valid!==!0);if(n.length===0)return S===r&&x(!0),!0;const{valid:h,comp:p,err:F}=n[0];return S===r&&(F!==void 0&&console.error(F),x(!1,p),g===!0&&h!==!0&&typeof p.focus=="function"&&p.focus()),!1})}function C(){r++,o.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function A(t){t!==void 0&&N(t);const s=r+1;d().then(g=>{s===r&&g===!0&&(e.onSubmit!==void 0?l("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function B(t){t!==void 0&&N(t),l("reset"),w(()=>{C(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){k(()=>{if(a.value===null)return;const t=a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),s=>s.tabIndex>-1);t!=null&&t.focus({preventScroll:!0})})}J(U,{bindComponent(t){o.push(t)},unbindComponent(t){const s=o.indexOf(t);s>-1&&o.splice(s,1)}});let K=!1;return L(()=>{K=!0}),R(()=>{K===!0&&e.autofocus===!0&&v()}),j(()=>{e.autofocus===!0&&v()}),Object.assign(u.proxy,{validate:d,resetValidation:C,submit:A,reset:B,focus:v,getValidationComponents:()=>o}),()=>z("form",{class:"q-form",ref:a,onSubmit:A,onReset:B},q(i.default))}});const Z={name:"GridComponent",props:{data:{type:Array,default:null},columns:{type:Array,default:null},filterKey:{type:String,default:null}},data(){return{sortKey:"",sortOrders:this.columns.reduce((e,i)=>(e[i]=1,e),{})}},computed:{filteredData(){const e=this.sortKey,i=this.filterKey&&this.filterKey.toLowerCase(),l=this.sortOrders[e]||1;let u=this.data;return i&&(u=u.filter(a=>Object.keys(a).some(r=>String(a[r]).toLowerCase().indexOf(i)>-1))),e&&(u=u.slice().sort((a,r)=>(a=a[e],r=r[e],(a===r?0:a>r?1:-1)*l))),u}},methods:{sortBy(e){this.sortKey=e,this.sortOrders[e]=this.sortOrders[e]*-1},capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},ee={key:0},te=["onClick"],re={key:1,class:"flex flex-center"};function oe(e,i,l,u,a,r){return r.filteredData.length?(c(),f("table",ee,[y("thead",null,[y("tr",null,[(c(!0),f(_,null,b(l.columns,o=>(c(),f("th",{key:o,class:Q({active:a.sortKey==o}),onClick:d=>r.sortBy(o)},[H(V(r.capitalize(o))+" ",1),y("span",{class:Q(["flecha",a.sortOrders[o]>0?"asc":"dsc"])},null,2)],10,te))),128))])]),y("tbody",null,[(c(!0),f(_,null,b(r.filteredData,o=>(c(),f("tr",{key:o},[(c(!0),f(_,null,b(l.columns,d=>(c(),f("td",{key:d},V(o[d]),1))),128))]))),128))])])):(c(),f("p",re,"Sin coincidencias"))}var ae=O(Z,[["render",oe]]);const ne={name:"TablePage",components:{Grid:ae},data:()=>({searchQuery:"",gridColumns:["Nombre","Edad","Altura","Experiencia"],gridInfo:[{Nombre:"Alfre",Edad:22,Altura:1.8,Experiencia:.25},{Nombre:"Dani",Edad:36,Altura:1.8,Experiencia:15},{Nombre:"Ivan",Edad:20,Altura:1.7,Experiencia:.25},{Nombre:"Jorge",Edad:20,Altura:1.6,Experiencia:.25},{Nombre:"Adrian",Edad:18,Altura:1.9,Experiencia:.2},{Nombre:"Carlos",Edad:52,Altura:1.7,Experiencia:25}]})},se=y("h3",{class:"q-my-sm text-center text-primary"},"Grid de Empleados",-1);function ie(e,i,l,u,a,r){const o=W("Grid",!0);return c(),M(X,{class:"flex flex-center"},{default:G(()=>[y("div",null,[se,E(Y,null,{default:G(()=>[E(D,{id:"search",modelValue:e.searchQuery,"onUpdate:modelValue":i[0]||(i[0]=d=>e.searchQuery=d),class:"flex flex-center",name:"query",label:"Buscar"},null,8,["modelValue"])]),_:1}),E(o,{data:e.gridInfo,columns:e.gridColumns,"filter-key":e.searchQuery},null,8,["data","columns","filter-key"])])]),_:1})}var xe=O(ne,[["render",ie]]);export{xe as default};
